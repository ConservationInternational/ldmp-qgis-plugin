sudo: required
addons:
  hosts:
  - boundless-test
services:
- docker
env:
  global:
  - PLUGIN_NAME=LDMP
  matrix:
  - QGIS_VERSION_TAG=master_2 PYTHON_EXECUTABLE=python PIP_EXECUTABLE=pip
before_install:
- openssl aes-256-cbc -K $encrypted_f20454987851_key -iv $encrypted_f20454987851_iv
  -in trends.earth_credentials.json.enc -out trends.earth_credentials.json -d
- openssl aes-256-cbc -K $encrypted_f20454987851_key -iv $encrypted_f20454987851_iv
  -in aws_credentials.json.enc -out LDMP/test/aws_credentials.json -d
- docker-compose up -d
- docker-compose ps
- sleep 10
- docker-compose exec qgis-testing-environment sh -c "qgis_setup.sh ${PLUGIN_NAME}"
- docker-compose exec qgis-testing-environment sh -c "pip install paver"
- docker-compose exec qgis-testing-environment sh -c "pip install boto3"
script:
- docker-compose exec qgis-testing-environment sh -c "cd /tests_directory && paver
  setup && paver package --tests"
- docker-compose exec qgis-testing-environment sh -c "cd /tests_directory && paver
  deploy"
